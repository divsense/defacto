{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a41dfdd7fa965a3460e2","webpack:///./src/internal/index.js","webpack:///./src/internal/tst.js","webpack:///./src/internal/nsf.js","webpack:///external \"ramda\"","webpack:///./src/internal/tst-checks.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;AC7DA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,eAAe;AACF;;;;;;;;;;;;ACXvB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AAAA;AAAA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,IAAI;AAClD;AAAA;AAAA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AAAA;AAAA;;AAEA;AACA;;AAEA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA,GAAG;AACH;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;AClGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;;AAGH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;;AAEA;;AAEA,aAAa;;AAEb;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,kCAAkC,2BAA2B;;AAE7D;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,qBAAqB;AAC3D;AACA;AACA;;AAEA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC,yCAAyC,EAAE;AAC3E;;AAEA;;AAEA;AACA;;;;;;;ACvKA,gD;;;;;;ACAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"defactoInternal.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ramda\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"defactoInternal\", [\"ramda\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"defactoInternal\"] = factory(require(\"ramda\"));\n\telse\n\t\troot[\"defactoInternal\"] = factory(root[\"ramda\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_10__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a41dfdd7fa965a3460e2","/**\n * \n * Refer to this for different es6 export/import options: \n * http://stackoverflow.com/questions/25494365/es6-javascript-module-export-options\n * \n * Refer to this for how the exporting functionality works:\n *  http://stackoverflow.com/questions/29722270/import-modules-from-files-in-directory\n * \n */\n\n//export {default as nsf} from './nsf';\nexport {default as tst} from './tst';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/internal/index.js\n// module id = 7\n// module chunks = 1","import * as nsf from './nsf.js';\nimport * as c from './tst-checks.js';\n\n//export default exports;\n\n/** ===== This represents a \"Transformative State Tree\" =====\n * These functions are mostly pure. They transform the tree based on state transitions\n *  without storing state but only passing it forward\n * Parents can pass data and their state defined in prep_call to children.\n * Siblings compute based on state and can pass computed values to the next sibling via compute_call.\n * When all siblings are done, the final computed value gets returned to parent,\n *  which uses it for its own computation.  */\n\n/** @TODO write up\n * @sig DSNode a => a -> b -> a -> c -> d -> e  */\nexport const traverseDepthPure = (root, data, fromParent, prep_call, compute_call) => {\n  const chs = nsf.childNodes(root, data);\n  return chs.reduce( function(siblings_computed, node, i){\n    return prepTraverseCompute(node, data, siblings_computed, fromParent, prep_call, compute_call);\n  }, null);\n};\n\nexport const prepTraverseCompute = (node, data, siblings_computed, fromParent, prep_call, compute_call) => {\n  const prepRes = prep_call(node, fromParent);\n  c.prepResEQfromParent(prepRes, fromParent);\n  \n  const children_computed = traverseDepthPure( node, data, prepRes, prep_call, compute_call );\n  \n  return compute_call(node, fromParent, prepRes, siblings_computed, children_computed);\n};\n\n// Pure Depth First Traversal with Transformative Parse Tree\nexport const traversePure = (data, prep_call, compute_call ) => {\n  if( !prep_call || !compute_call )\n    return false;\n  if( !Array.isArray( data ) )\n    throw \"Array expected\";\n  \n  return prepTraverseCompute(data[0], data, {}, {}, prep_call, compute_call);\n};\n\nexport const stateMachine = function stateMachine(states, nodeType) {\n  if (!Array.isArray(states)) throw new Error(\"'states' should be an Array of [currentState, nodeType, nextState] items\");\n  if (!(typeof nodeType === 'function')) throw new Error(\"'nodeType' should be a function\");\n  \n  return {\n    states: states,\n    nodeType: nodeType, \n    next : function(current_state, node) {\n      if (!(typeof current_state === 'string'))\n        throw new Error(\"'current_state' should be a string\");\n      \n      var node_type = nodeType(current_state, node);\n      \n      var next_state = states.find(function (el) {\n        return el[0] === current_state && el[1] === node_type;\n      });\n      \n      if (!next_state)\n        throw new Error(\"There is no state for 'current_state' : \" +\n                        current_state + \" 'and node_type' : \" + node_type);\n      \n      return next_state[2];\n    }\n  };\n};\n/** Make sure that the object 'obj' passed is instantiated and it has all\n    elements specified in the array 'arr' and that the elements are set to\n    preset or empty string if preset is undefined */\nexport const ensureAll = function(obj, arr, preset){\n  obj = obj || {};\n  return arr.reduce((o, str) => {\n    if(!preset)\n      o[str] = o[str] || '';\n    else\n      o[str] = o[str] || preset;\n    \n    return o;\n  }, obj);\n};\n\nexport const mmapToMap = function(data){\n  var m = new Map();\n  \n  if( Array.isArray( data ) ){\n    for(var i = 0; i < data.length; i++ ){\n      m.set(data[i]._id, data[i]);\n    }\n  }else\n    throw new Error(\"An mmap is always an Array\");\n  return m;\n};\n\nexport const fastFind = function( data, nodeId ){\n  if(data instanceof Map)\n    return data.get(nodeId);\n  else throw new Error(\"The func fastFind only expects a Map. Please use mmapToMap\" +\n                       \"to convert to Map first and keep the data locally\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/internal/tst.js\n// module id = 8\n// module chunks = 1","//\n// Divsense Nodes Storage Format\n//\nconst R = require('ramda');\n\nvar BRANCH_CLASS = 0;\nvar BRANCH_NODES = 1;\nvar BRANCH_ID = 2;\n\nvar NO_ORDER = 0;\nvar LEVEL_ORDER = 1;\nvar DEPTH_FIRST = 2;\n\nvar isProp = function( node_props, filter_props ){\n\n  if( node_props && filter_props ){\n    return node_props.some(function(a){\n      var p =  filter_props[ a[0] ];\n      return ( p && p[ a[1] ] );\n    });\n  }\n\n  return false;\n};\n\nvar isOpt = function( node, opt, prop ){\n  return isProp( node.u, opt[prop].u ) || isProp( node.k, opt[prop].k );\n};\n\nvar findById = function( data ){\n  return function( id ){\n    for(var i = 0; i < data.length; i++ ){\n      if( data[i]._id === id ){\n        return data[i];\n      }\n    }\n  };\n};\n\n// This traverses the Array every time it needs to find something.\n// @todo build similar using fastFind\nvar childNodes = function( node, data ){\n\n  return ( (node.a || [] ).concat( (node.b || []) ) )\n    .reduce( function(m,b){\n      return m.concat( b[1] );\n    }, [])\n    .map( findById(data) );\n\n};\n\nvar traverseLevelOrder = function( root, data, options, level, callback ){\n\n  var chs = childNodes( root, data );\n\n  var res = chs.some( function(n){\n    return !!callback( null, n, level );\n  });\n\n  if( !res ){\n    res = chs.some( function(n){\n      return traverseLevelOrder( n, data, options, (level + 1), callback );\n    });\n  }\n\n  return res;\n};\n\nvar traverseDepthFirst = function( root, data, options, level, callback ){\n\n  var chs = childNodes( root, data );\n\n  return chs.some( function(n){\n\n    var res, ll;\n\n    if( options.pass && isOpt( n, options, \"pass\" ) ){\n      res = traverseDepthFirst( n, data, options, level, callback );\n    }\n    else if( !options.take || isOpt( n, options, \"take\" ) ){\n      if( !callback( null, n, level ) ){\n        res = traverseDepthFirst( n, data, options, level + 1, callback );\n      }\n    }\n\n    return res;\n\n  });\n\n\n};\n\nvar props = function( obj ){\n  return Object.keys( obj ).reduce(function(m,a){\n    m.push( [ a, obj[ a ] ] );\n    return m;\n  }, []);\n};\n\nvar makeNode = function( id, params ){\n\n  return function(set){\n\n    set = set || [];\n\n    var s = {_id: id};\n\n    if( params.t ) s.t = params.t;\n\n    if( params.u ) s.u = props( params.u );\n\n    if( params.k ) s.k = props( params.k );\n\n    set.push( s );\n    return set;\n  };\n};\n\nvar setChildNodes = function( parentId, cids, side, branchName ){\n\n  return function(set){\n\n    side = side || \"a\";\n    branchName = branchName || \"children-mmap\";\n\n    var node = R.find(function(e){return e._id === parentId;}, set);\n\n    if( node ){\n\n      node[ side ] = node[ side ] || [];\n\n      node[ side ].push( [ branchName, cids] );\n\n      cids.forEach( function(id){\n\n        var node = R.find(function(e){return e._id === id;}, set);\n        if( node ){\n          node.p = parentId;\n        }\n\n      });\n    }\n\n    return set;\n  };\n};\n\nexports.findIndex = function( data, options ){\n\n  if( Array.isArray( data ) ){\n    if( options.byId ){\n      for(var i = 0; i < data.length; i++ ){\n        if( data[i]._id === options.byId ){\n          return i;\n        }\n      }\n    }\n  }\n};\n\nexports.has = function( key, value, prop ){\n  return prop.some( function(p){ return (p[0] === key && p[1] === value); });\n};\n\nexports.childNodes = childNodes;\n\nexports.makeNode = makeNode;\nexports.setChildNodes = setChildNodes;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/internal/nsf.js\n// module id = 9\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_10__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ramda\"\n// module id = 10\n// module chunks = 1","/** Error checking helper for tst.js\n *  This let's tst.js be as clean as possible */\n\nexports.prepResEQfromParent = (p, f) => {\n  if(p === f)\n    throw new Error(\"Do not mutate fromParent inside of 'prep_call' and create \" +\n                        \"a new object instead. Otherwise parent's next state won't \" +\n                        \"be transitioned properly\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/internal/tst-checks.js\n// module id = 11\n// module chunks = 1"],"sourceRoot":""}